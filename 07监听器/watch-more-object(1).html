<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>监听属性</title>
	</head>
	<body>
		<div id="app">
			<p><input type="text" v-model="person.age"></p>
      <p v-show="info">{{ info }}</p>
		</div>
	
    <script src="../vue.js" type="text/javascript" charset="utf-8"></script>
		<script>
      Vue.createApp({
        data(){
          return {
            person: {
              name: 'lisi',
              age: 0
            },
            info: ''
          }
        },
        mounted() {
            let that = this
            setTimeout(function() {
                that.person.age = 200
            }, 5 * 1000);
        },
        watch: {

          /* 
          ---Handler主要用于异步消息的处理：
          当发出一个消息之后，首先进入一个消息队列，
          发送消息的函数即刻返回，而另外一个部分在消息队列中逐一将消息取出，
          然后对消息进行处理，也就是发送消息和接收消息不是同步的处理。 
          这种机制通常用来处理相对耗时比较长的操作。
          ---在计算机编程语言中，Event 对象代表事件的状态，
          比如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态。
          事件通常与函数结合使用，函数不会在事件发生前被执行 */
          person: {
            handler(val, oldValue){
              console.log("= = val " + JSON.stringify(val))
              console.log("= = oldValue " + JSON.stringify(oldValue))
              if(val.age >= 18){
                this.info = '已成年'
              }
              else {
                this.info = '未成年'
              }
            },
            deep: true,

            //初始显示
            immediate: true
          }
          /*  'person.age'(val){
            if(val >= 18){
              this.info = '已成年'
            }
            else {
              this.info = '未成年'
            } 
          } */
        }
      }).mount('#app')
    </script>
	</body>
</html>

